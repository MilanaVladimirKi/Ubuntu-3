# Режим доступа к файлам и каталогам.



## Команды

Команда **chmod** (change mode – сменить режим) предназначена для изменения прав доступа к файлам и каталогам в Unix-подобных операционных системах. Ключи необязательны. Устанавливать права можно двумя способами: с помощью буквенного обозначения прав (rwx) и с помощью числового в восьмеричной системе счисления. 

Команда **chown** (change owner - смена владельца) — утилита, предназначенная для изменения владельца и/или группы для указанных файлов.

Команда **chgrp** изменяет группу каждого заданного файла на группу, которая может быть представлена как именем группы, так и её числовым идентификатором (GID). Рекурсивное изменение группы для каталогов и их содержимого. Возникающие ошибки не прекращают работы команды. Завершает список опций. 

Команда **file** в Linux используется для определения типа файла. Она читает содержимое файла и выводит информацию о его типе, например, текстовый файл, бинарный файл, изображение и т. д. Результат выполнения команды для нескольких файлов будет содержать информацию о каждом из них. 

Определить, чем является данный файл – исполняемым файлом, сценарием оболочки, текстовым документом или чем-то другим, можно с помощью команды **file**.

## 1. Для каких типов пользователей определяется доступ к файлу? 2. На что, кроме права на запись и права на чтение, могут иметь право пользователи?

В Linux доступ к файлам определяется для трех типов пользователей: владельца файла, группы владельца и остальных пользователей. Каждый из этих типов пользователей может иметь определенные права на чтение, запись и исполнение файла. Таким образом, владелец файла может иметь полный доступ к файлу, включая чтение, запись и исполнение. 

Посмотрим, что означают чтение, запись и выполнение файлов и каталогов с точки зрения функциональных возможностей. 

Чтение:
- просмотр содержимого файла;
- просмотр содержимого каталога. 

Запись:
- изменение содержимого файла;
- удаление или перемещение файлов в каталоге. 

Выполнение:
- выполнение файла (запуск программы);
- возможность поиска в каталоге в комбинации с правом чтения.

Установить или изменить права доступа к файлу или каталогу могут только владелец файла и суперпользователь. 

Для изменения прав доступа к файлу используется утилита chmod.

## 3. Как определить режим доступа к файлу или каталогу?

Права доступа к файлу (эти сведения называются режимом доступа файла - mode) или каталогу описываются тремя основными восьмеричными цифрами или латинскими буквами - rwx.

Разрешения доступа для каталогов отличаются от разрешений для файлов. Каталог, как и любой другой файл, имеет владельца и группу. Но права на запись, чтение и выполнение имеют другое значение для каталогов, чем для файлов.

Если у каталога есть право на чтение, то владелец, группа и другие пользователи могут просматривать содержимое каталога, то есть получать список имен файлов, находящихся в этом каталоге. Однако сами файлы внутри каталога могут быть недоступны для чтения. 

Определить, какие права доступа к файлу установлены можно с помощью команды ls –l

Формат вывода команды ls –l несколько столбцов: в первом столбце представлены права доступа к файлу (режим доступа файла). 

## 4. Опишите действие модификатора доступа Sticky bit на доступ к файлам и каталогам. 

Sticky bit (Save Text Attribute) – «липкий» бит.  
- Sticky bit для файлов – в современных операционных системах потерял свое значение;
- Sticky bit для каталогов – если установлен для каталога, то пользователь, несмотря на то, что ему разрешена запись в этот каталог, может удалять только те файлы, владельцем которых он является или к которым ему явно заданы права записи. 

Для исполняемых файлов атрибут Sticky bit (Save Text Attribute) имеет скорее историческое, чем практическое значение. 

Атрибуту Sticky bit соответствует символ «t» на месте символа «x» в тройке прав для остальных пользователей.

## 5. Опишите действие модификатора доступа SUID на доступ к файлам и каталогам. 

SUID (Set User ID) – установка идентификатора пользователя. 

SUID для файлов – если установлены права доступа SUID и файл исполняемый, то при запуске на выполнение, он получает не права пользователя, запустившего его, а права владельца файла. Например, для того, чтобы пользователь мог изменить свой пароль при помощи утилиты passwd (владелец которой - root), должен быть установлен флаг SUID, поскольку эта утилита работает с файлом /etc/passwd, изменять который может только root. 

Если установить SUID для каталога, то все файлы созданные в нем при запуске будут принимать идентификатор группы каталога, а не группы владельца, который создал файл в этом каталоге. 
Одним словом, если пользователь поместил исполняемый файл в такой каталог, запустив его, процесс запустится от имени владельца (группы) каталога, в котором лежит этот файл.

Набор базовых разрешений на доступ (чтение, запись, выполнение) обозначается символами «rwx».
Если для файла установлен атрибут SUID, то вместо символа «x» в тройке будет указан символ «s». При назначении атрибута SUID символ «s» займет место символа «x» в тройке прав владельца файла. 

## 6. Опишите действие модификатора доступа SGID на доступ к файлам и каталогам.

SGID (Set Group ID) – установка идентификатора группы. 

- SGID для файлов – аналогично установке бита SUID, только вместо владельца файла используется группа владельца.
- SGID для каталогов – файлы, которые создаются в этом каталоге, будут иметь установки группы такие же, как у каталога.

Набор базовых разрешений на доступ (чтение, запись, выполнение) обозначается символами «rwx».
Если для файла установлен атрибут SGID, то вместо символа «x» в тройке будет указан символ «s». При назначении атрибута SGID символ «s» займет место символа «x» в тройке прав группы файла. 

## 7. Для чего и как используется команда chmod? Приведите пример ее использования.

Управлять доступом к файлам и каталогам позволяют команды chown (сменить владельца) и chmod (изменить режим). Первая из них меняет владельца файла, а вторая – режим доступа к файлу. Изменять владельца файла и режим доступа к файлу может только пользователь, обладающий соответствующими правами на доступ к файлу или каталогу.

Команда chmod используется для изменения режима доступа к объектам.

В случае с числовым представлением режима доступа команда выглядит следующим образом:

сhmod права файл 

Права передаются в виде четырех восьмеричных чисел. 

1) Первое число определяет комбинацию дополнительный атрибут и может принимать значения, полученные как сумма следующих чисел:

- 1 – установка атрибута Sticky bit; 
- 2 – установка атрибута SGID;
- 4 – установка атрибута SUID. 

То есть, число 7 означает, что необходимо установить все дополнительные атрибуты (1+2+4), число 6 (2+4) означает, что устанавливаются атрибуты SGID и SUID, а атрибут Sticky bit не устанавливается и т.д. 

Если никакие биты дополнительных атрибутов устанавливать не нужно, то первое число можно пропустить.

2) Второе число определяет права владельца. Оно может принимать значения от 0 до 7 включительно: 

0 – запрещено все; 1 – разрешено выполнение; 2 – разрешена запись; 3 – разрешено запись и выполнение; 4 – разрешено чтение; 5 – разрешено чтение и выполнение; 6 – разрешено чтение и запись; 7 - разрешено все. 

3) Третье число определяет права группы. Может принимать значения от 0 до 7, аналогичные значениям для владельца.

4) Четвертое число определяет права остальных пользователей. Может принимать значения от 0 до 7, аналогичные значениям для владельца. 

Например: Команда сhmod 771 text = команде сhmod 0771 text

Здесь Число 771 определяет права rwxrwx-—x, то есть владелец и члены его группы могут делать с файлом всё, а остальные пользователи только выполнять.

Параметры могут включать комбинацию следующих значений:

– u – изменить права владельца; 

– g – изменить права группы; 

– o – изменить права остальных пользователей; 

– a – изменить все права (то же самое, что передать значение ugo). 

Режим доступа: 

– r – чтение;

– w – запись;

– x – выполнение;

– X – выполнение, если файл является каталогом;

– s – SUID или SGID;

– t – Sticky bit (в этом случае только владелец файла и каталога сможет удалить его);

– u – установить права всем пользователям, как у владельца; 

– g - установить права всем пользователям, как у группы; 

– o - установить права всем пользователям, как у «остальных пользователей». 

Например, команда сhmod g-r text отменит возможность чтения файла text у группы. 

Чтобы назначить файлу text атрибут SUID, оставив остальные атрибуты без изменения, необходимо выполнить команду сhmod u+s text 

# Создание общего каталога для группы пользователей. 

![cafe](https://sun9-79.userapi.com/impg/cn_IkzwE1u6-6Y9wVGmHgHvC1NrpO3qRKt1GbA/c70fK33sgxQ.jpg?size=670x906&quality=95&sign=da8d4f568e44da396bd7d8d55ce1862f&type=album)

